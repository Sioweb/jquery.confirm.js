/*! sioweb-confirm 2017-03-30 */
!function(a){"use strict";var b="confirm";a[b+"Default"]={debug:!0,enabled:!0,reload:!1,container:window,template:null,title:"Sind Sie sicher?",content:"Bitte best√§tigen Sie ihre Aktion mit OK, oder brechen Sie die Aktion ab mit Abbrechen.",button_accept:"OK",button_abort:"Abbrechen",on:"click",input:!1,keys:{abort:27},url:null,ajaxOptions:{method:"POST"},lazyLoad:!1,removeOnClose:!1,modalClass:"modal",hideAfter:null,hideAfterTimeout:!1,keep_modal:!1,custom_buttons:null,open:function(){},button_pressed:function(){},close:function(){},defaultAction:function(){},accept:function(){},abort:function(){},ajaxSuccess:function(){},createForm:!1};var c=function(){var c=this;this.item=!1,this.modal=null,this.isHTML=!1,this.global={},this.initOptions=new Object(a[b+"Default"]),this.init=function(b){arguments[1]||!1;c=this,c.reload&&null!==c.modal&&c.modal.length&&(c.modal.remove(),c.template=null),this.container||(this.container=window),this.container=a(this.container),this.elem=b,this.item=a(this.elem),this.isHTML="html"===c.item[0].tagName.toLowerCase(),c.enabled&&(null!==c.url||c.lazyLoad?c.lazyLoad?c.loaded():a.ajax(a.extend(c.ajaxOptions,{url:c.url,success:function(a){c.createTemplate(a),c.addModal(),c.ajaxSuccess(c,a)}})):(c.createTemplate(),c.addModal()))},this.addModal=function(){c.modal=a(c.template).appendTo("body"),c.modal.unbind("click").click(function(a){a.preventDefault(),a.stopPropagation()}).children().unbind("click").click(function(a){a.stopPropagation()}),c.modal.find("a").unbind("click").click(function(b){var d=a(this),e=d.data("custom");b.stopPropagation(),void 0!==c.custom_buttons&&void 0!==e&&void 0!==c.custom_buttons[e]&&("function"==typeof c.custom_buttons[e].callback&&c.custom_buttons[e].callback(d,c.custom_buttons[e],c),void 0===c.custom_buttons[e].keep_modal&&c.modal.removeClass("open"))}),c.modal.find(".ui-modal-button").click(function(b){var d=a(this);c.button_pressed(d,c),d.is(".ui-modal-ok")&&c.inner_accept(),d.is(".ui-modal-abort")&&c.inner_abort()}),c.modal.find(".ui-modal-close").click(function(){c.button_pressed(a(this),c),c.inner_abort()}),this.loaded()},this.createTemplate=function(){var a=arguments[0]||"";if(!c.template){if(c.template='<div class="ui-modal '+c.modalClass+'" tabindex="1">',c.template+='<div tabindex="3" class="ui-modal-close"></div>',c.template+='<div class="ui-modal-inner inner">',c.template+='<div class="ui-modal-header">',c.template+="<h2>"+c.title+"</h2>",c.template+="<p>"+c.content+"</p>",c.template+="</div>",c.input&&"function"==typeof c.createForm?a+=c.createForm(c):c.input&&(a+='<input type="text" name="confirm_input">'),a&&(c.template+='<div class="ui-modal-content">',c.template+=a,c.template+="</div>"),c.template+='<div class="ui-modal-buttons">',c.button_accept&&(c.template+='<div class="ui-modal-button ui-modal-ok">'+c.button_accept+"</div>"),c.button_abort&&(c.template+='<div class="ui-modal-button ui-modal-abort">'+c.button_abort+"</div>"),c.custom_buttons)for(var b in c.custom_buttons)c.template+='<div class="ui-modal-button-custom ui-modal-custom-'+b+'">',void 0!==c.custom_buttons[b].link&&(c.template+='<a data-custom="'+b+'" href="'+c.custom_buttons[b].link+'"'+(c.custom_buttons[b].target?' target="'+c.custom_buttons[b].target+'"':"")+">"),c.template+=c.custom_buttons[b].title,void 0!==c.custom_buttons[b].link&&(c.template+="</a>"),c.template+="</div>";c.template+="</div>",c.template+="</div>",c.template+="</div>"}},this.inner_accept=function(){c.accept(c),c.keep_modal||(c.modal.removeClass("open"),("html"===c.item.prop("tagName").toLowerCase()||c.removeOnClose)&&setTimeout(function(){c.template="",c.modal.remove()},500))},this.inner_abort=function(){a("body").unbind("confirm.keyup"),c.abort(c),c.modal.removeClass("open"),("html"===c.item.prop("tagName").toLowerCase()||c.removeOnClose)&&setTimeout(function(){c.template="",c.modal.remove()},500)},this.inner_open=function(){clearTimeout(c.hideAfterTimeout),null!==c.hideAfter&&(c.hideAfterTimeout=setTimeout(function(){c.inner_abort()},c.hideAfter)),a("body").on("confirm.keyup",function(a,b){switch(parseInt(b.which,10)){case c.keys.ok:c.inner_accept();break;case c.keys.abort:c.inner_abort()}}).keyup(function(b){a(this).trigger("confirm.keyup",b)}),c.open(c),c.modal.addClass("open")},this.disable=function(){clearTimeout(c.scrollTimeOut),c.enabled=!1},this.enable=function(){c.enabled=!0},this.update=function(a){void 0!==a.title&&c.modal.find(".ui-modal-title").html(a.title),void 0!==a.content&&c.modal.find(".ui-modal-content").html(a.content)},this.loaded=function(){c.enabled&&(c.lazyLoad&&null!==c.url?c.item.unbind(c.on).bind(c.on,function(b){a.ajax(a.extend(c.ajaxOptions,{url:c.url,success:function(b){c.createTemplate(b),c.addModal(),a(".ui-modal").removeClass("open"),c.inner_open(),c.ajaxSuccess(c,b)}}))}):c.lazyLoad&&null===c.url&&!this.isHTML?c.item.unbind(c.on).bind(c.on,function(b){c.createTemplate(),c.addModal(),a(".ui-modal").removeClass("open"),c.inner_open()}):c.modalHandlers())},this.modalHandlers=function(){this.isHTML?(a(".ui-modal").removeClass("open"),c.inner_open()):c.item.unbind(c.on).bind(c.on,function(b){b.preventDefault(),c.defaultAction(b,this,c),a(".ui-modal").removeClass("open"),c.inner_open()})}};a[b]=a.fn[b]=function(d){var e="function"==typeof this?a("html"):this,f=arguments[1]||{},g=[];return g[0]=e.each(function(h,i){var j=a.data(this,b);if(d&&"object"!=typeof d&&"init"!==d){if(!j)return;if(!j[d])return;var k=d;g[1]=j[k](f)}else if(j)j.init(this,1),"html"!==e.prop("tagName").toLowerCase()&&a.data(this,b,j);else{"init"===d&&(d=arguments[1]||{}),j=new c;var l=new Object(j.initOptions);d&&(l=a.extend(!0,{},l,d)),j=a.extend(l,j),j.init(this),"html"!==e.prop("tagName").toLowerCase()&&a.data(this,b,j)}}),void 0!==g[1]?g[1]:g[0]}}(jQuery);